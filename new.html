<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Attendance Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body, * {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    nav.main {
      width: 100%;
      background: orange;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem 2rem;
      color: #fff;
    }

    nav.main li {
      list-style: none;
      display: flex;
      align-items: center;
    }

    nav.main .toggle-theme {
      display: flex;
      align-items: center;
    }

    .switch {
      position: relative;
      display: inline-block;
      width: 40px;
      height: 20px;
      margin-right: 10px;
    }

    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0; left: 0;
      right: 0; bottom: 0;
      background-color: #ccc;
      transition: 0.4s;
      border-radius: 20px;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 14px; width: 14px;
      left: 3px; bottom: 3px;
      background-color: white;
      transition: 0.4s;
      border-radius: 50%;
    }

    input:checked + .slider {
      background-color: #2196F3;
    }

    input:checked + .slider:before {
      transform: translateX(20px);
    }

    body.dark {
      background-color: #121212;
      color: #e0e0e0;
    }

    body.dark select, body.dark input, body.dark canvas {
      background-color: #1e1e1e;
      color: #fff;
    }

    .filter-panel {
      padding: 1rem 2rem;
      display: flex;
      gap: 1rem;
      background: #f9f9f9;
    }

    .filter-panel input, .filter-panel select {
      padding: 0.5rem;
      border-radius: 0.3rem;
      border: 1px solid #ccc;
      min-width: 150px;
    }

    .chart-section {
      padding: 2rem;
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
    }

    .chart-box {
      flex: 1 1 45%;
      background: #fff;
      border-radius: 8px;
      padding: 1rem;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      overflow-x: auto;
    }

    .chart-box h2 {
      font-size: 1rem;
      margin-bottom: 1rem;
      text-align: center;
    }

    .chart-wrapper {
      height: 300px;
      min-width: 600px;
    }

    body.dark .chart-box {
      background: #1e1e1e;
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="main">
    <li><strong>Attendance Dashboard</strong></li>
    <li class="breadcrumb">Home > Meetings</li>
    <li class="toggle-theme">
      <label class="switch">
        <input type="checkbox" id="themeToggle">
        <span class="slider"></span>
      </label>
      <span>Dark Mode</span>
    </li>
  </nav>

  <!-- Filters -->
  <div class="filter-panel">
    <input type="date" id="startDate">
    <input type="date" id="endDate">
    <select id="location">
      <option value="">All Locations</option>
      <option>GCS MUSTER ROOM</option>
      <option>KMS MUSTER ROOM</option>
      <option>STP CANTEEN</option>
    </select>
    <select id="department">
      <option value="">All Departments</option>
      <option>Processing</option>
      <option>Engineering</option>
    </select>
  </div>

  <!-- Charts -->
  <section class="chart-section">
    <div class="chart-box">
      <h2>Meetings (Monthly)</h2>
      <div class="chart-wrapper">
        <canvas id="meetingChart"></canvas>
      </div>
    </div>

    <div class="chart-box">
      <h2>Concerns by Location</h2>
      <div class="chart-wrapper">
        <canvas id="concernsChart"></canvas>
      </div>
    </div>
  </section>

  <!-- Script -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Dark mode sync
      const toggle = document.getElementById('themeToggle');
      if (localStorage.getItem('theme') === 'dark') {
        document.body.classList.add('dark');
        toggle.checked = true;
      }
      toggle.addEventListener('change', () => {
        if (toggle.checked) {
          document.body.classList.add('dark');
          localStorage.setItem('theme', 'dark');
        } else {
          document.body.classList.remove('dark');
          localStorage.setItem('theme', 'light');
        }
      });

      // Chart initialization
      const meetingCtx = document.getElementById('meetingChart').getContext('2d');
      const concernsCtx = document.getElementById('concernsChart').getContext('2d');

      const meetingChart = new Chart(meetingCtx, {
        type: 'bar',
        data: {
          labels: ['Jan', 'Feb', 'Mar', 'Apr'],
          datasets: [{
            label: 'Meetings Count',
            data: [10, 8, 6, 12],
            backgroundColor: '#3b82f6'
          }]
        },
        options: {
          responsive: false,
          maintainAspectRatio: false,
          plugins: {
            legend: { display: false }
          },
          scales: {
            y: {
              beginAtZero: true
            }
          }
        }
      });

      const concernsChart = new Chart(concernsCtx, {
        type: 'pie',
        data: {
          labels: ['GCS MUSTER ROOM', 'KMS MUSTER ROOM', 'STP CANTEEN'],
          datasets: [{
            data: [4, 6, 7],
            backgroundColor: ['#ef4444', '#f59e0b', '#10b981']
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              position: 'right'
            }
          }
        }
      });

      function updateCharts(start, end, location, department) {
        // Dummy update (you can filter actual data here)
        meetingChart.data.labels = ['Jan', 'Feb', 'Mar', 'Apr'];
        meetingChart.data.datasets[0].data = [5, 7, 4, 6];
        meetingChart.update();

        concernsChart.update();
      }

      ['startDate', 'endDate', 'location', 'department'].forEach(id => {
        document.getElementById(id).addEventListener('change', () => {
          const start = document.getElementById('startDate').value;
          const end = document.getElementById('endDate').value;
          const location = document.getElementById('location').value;
          const dept = document.getElementById('department').value;
          updateCharts(start, end, location, dept);
        });
      });
    });
  </script>
</body>
</html>
